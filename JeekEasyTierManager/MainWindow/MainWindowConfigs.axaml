<UserControl
    x:Class="JeekEasyTierManager.MainWindowConfigs"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:JeekEasyTierManager"
    x:DataType="local:MainViewModel">

    <Border Classes="Card">
        <StackPanel Orientation="Vertical" Spacing="10">

            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Classes="Title" Text="ðŸ“" />
                <Label Classes="Title" Content="EasyTier é…ç½®" />
            </StackPanel>

            <DataGrid
                x:Name="ConfigsDataGrid"
                AutoGenerateColumns="False"
                BorderBrush="Gray"
                BorderThickness="1"
                GridLinesVisibility="All"
                HeadersVisibility="None"
                ItemsSource="{Binding Configs}"
                SelectionChanged="DataGrid_SelectionChanged">

                <DataGrid.Columns>

                    <DataGridTextColumn Binding="{Binding Name}" />

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock
                                    Margin="10,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Foreground="{Binding Status, Converter={x:Static local:ServiceStatusToColorConverter.Instance}}"
                                    Text="{Binding Status}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button
                                        Command="{Binding RestartSingleServiceCommand, Source={x:Static local:MainViewModel.Instance}}"
                                        CommandParameter="{Binding}"
                                        Content="â–¶ï¸"
                                        ToolTip.Tip="é‡å¯æœåŠ¡" />
                                    <Button
                                        Command="{Binding StopSingleServiceCommand, Source={x:Static local:MainViewModel.Instance}}"
                                        CommandParameter="{Binding}"
                                        Content="â¹ï¸"
                                        ToolTip.Tip="åœæ­¢æœåŠ¡" />
                                    <Button
                                        Command="{Binding EditSingleConfigCommand, Source={x:Static local:MainViewModel.Instance}}"
                                        CommandParameter="{Binding}"
                                        Content="âœï¸"
                                        ToolTip.Tip="ç¼–è¾‘é…ç½®" />
                                    <Button
                                        Command="{Binding TestSingleConfigCommand, Source={x:Static local:MainViewModel.Instance}}"
                                        CommandParameter="{Binding}"
                                        Content="ðŸƒ"
                                        ToolTip.Tip="æµ‹è¯•é…ç½®" />
                                    <Button
                                        Content="..."
                                        ToolTip.Tip="æ›´å¤šåŠŸèƒ½...">
                                        <Button.Flyout>
                                            <MenuFlyout>
                                                <MenuItem
                                                    Command="{Binding InstallSingleServiceCommand, Source={x:Static local:MainViewModel.Instance}}"
                                                    CommandParameter="{Binding}"
                                                    Header="å®‰è£…æœåŠ¡"
                                                    Icon="ðŸ“Œ" />
                                                <MenuItem
                                                    Command="{Binding UninstallSingleServiceCommand, Source={x:Static local:MainViewModel.Instance}}"
                                                    CommandParameter="{Binding}"
                                                    Header="å¸è½½æœåŠ¡"
                                                    Icon="âœ‚ï¸" />
                                                <MenuItem
                                                    Command="{Binding EditSingleConfigFileCommand, Source={x:Static local:MainViewModel.Instance}}"
                                                    CommandParameter="{Binding}"
                                                    Header="ç¼–è¾‘åŽŸå§‹é…ç½®æ–‡ä»¶"
                                                    Icon="ðŸ“„" />
                                                <MenuItem
                                                    Command="{Binding RenameSingleConfigCommand, Source={x:Static local:MainViewModel.Instance}}"
                                                    CommandParameter="{Binding}"
                                                    Header="é‡å‘½åé…ç½®"
                                                    Icon="â›ï¸" />
                                                <MenuItem
                                                    Command="{Binding DeleteSingleConfigCommand, Source={x:Static local:MainViewModel.Instance}}"
                                                    CommandParameter="{Binding}"
                                                    Header="åˆ é™¤é…ç½®"
                                                    Icon="ðŸ—‘ï¸" />
                                            </MenuFlyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>

            <StackPanel
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                Spacing="10">

                <ToggleSwitch
                    IsChecked="{Binding DeleteExtraConfigsOnOtherNodesWhenNextSync}"
                    OffContent="åŒæ­¥åˆ é™¤"
                    OnContent="åŒæ­¥åˆ é™¤"
                    ToolTip.Tip="åŒæ­¥æ—¶åˆ é™¤å…¶ä»–èŠ‚ç‚¹çš„å¤šä½™é…ç½®" />
                <Button
                    Classes="Red"
                    Command="{Binding SyncConfigsCommand}"
                    Content="åŒæ­¥"
                    ToolTip.Tip="åŒæ­¥é…ç½®åˆ°å…¶ä»–èŠ‚ç‚¹" />
                <Button
                    Command="{Binding RefreshConfigsCommand}"
                    Content="ðŸ”„"
                    ToolTip.Tip="åˆ·æ–°åˆ—è¡¨" />
                <Button
                    Command="{Binding AddConfigCommand}"
                    Content="âž•"
                    ToolTip.Tip="æ–°å¢žé…ç½®" />
                <Button
                    Command="{Binding RestartSelectedServicesCommand}"
                    Content="â–¶ï¸"
                    ToolTip.Tip="é‡å¯æœåŠ¡" />
                <Button
                    Command="{Binding StopSelectedServicesCommand}"
                    Content="â¹ï¸"
                    ToolTip.Tip="åœæ­¢æœåŠ¡" />
                <Button
                    Command="{Binding EditSelectedConfigsCommand}"
                    Content="âœï¸"
                    ToolTip.Tip="ç¼–è¾‘é…ç½®" />
                <Button
                    Content="..."
                    ToolTip.Tip="æ›´å¤šåŠŸèƒ½...">
                    <Button.Flyout>
                        <MenuFlyout>
                            <MenuItem
                                Command="{Binding InstallSelectedServicesCommand}"
                                Header="å®‰è£…æœåŠ¡"
                                Icon="ðŸ“Œ" />
                            <MenuItem
                                Command="{Binding UninstallSelectedServicesCommand}"
                                Header="å¸è½½æœåŠ¡"
                                Icon="âœ‚ï¸" />
                            <MenuItem
                                Command="{Binding EditSelectedConfigsCommand}"
                                Header="ç¼–è¾‘åŽŸå§‹é…ç½®æ–‡ä»¶"
                                Icon="ðŸ“„" />
                            <MenuItem
                                Command="{Binding DeleteSelectedConfigsCommand}"
                                Header="åˆ é™¤é…ç½®"
                                Icon="ðŸ—‘ï¸" />
                        </MenuFlyout>
                    </Button.Flyout>
                </Button>

            </StackPanel>

        </StackPanel>

    </Border>

</UserControl>